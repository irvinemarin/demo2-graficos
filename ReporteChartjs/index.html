<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualización de datos con ChartJS</title>

    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300" rel="stylesheet" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet" />
</head>

<body>
    <main>
        <div style="display: flex">
            <img src="assets/logo-pj.png" style="height: 50px" alt="">
            <!--        <img src="assets/icon.png"-->
            <!--             style="height: 36px" alt="">-->
            <h1 style="text-align: center; width: 65%"> Reportes PJ
                <br><span>Visualización de estadísticas </span>
            </h1>

        </div>
        <div id="fondoPJ"></div>
        <hr>


        <div class="leftPanel">
            <div class="listaReportes">
                <div class="item-report">
                    <p onclick="onCLickListener('1','REPORTE DE INGRESOS') ">REPORTE DE INGRESOS </p>
                </div>
                <div class="item-report">
                    <p onclick="onCLickListener('2','REPORTE PROGRAMADOS')">REPORTE PROGRAMADOS</p>
                </div>
                <div class="item-report">
                    <p onclick="onCLickListener('3','REPORTE ESCRITOS')">REPORTE ESCRITOS</p>
                </div>
                <!--            <div class="item-report">-->
                <!--                <p onclick="onCLickListener('3')">INGRESOS EXPEDIENTES SALAS SUPREMAS </p>-->
                <!--            </div>-->
            </div>

        </div>

        <div class="mainPanel">
            <div style="display: flex; align-content: flex-end;">
                <button type="button" class="btn btn-success" onclick="print()">IMPRIMIR</button>
            </div>

            <h2 class="loading">Esperando respuesta de la API...</h2>

            <section id="content01" class="cols-1">
                <figure>
                    <p>Gráfico Grupo Bar</p>
                    <h3 id="tituloReporte1"></h3>
                    <canvas id="chart7"></canvas>
                </figure>
            </section>

            <section id="content02" class="cols-1">
                <figure>
                    <p>Gráfico Grupo Bar</p>
                    <h3 id="tituloReporte2"></h3>
                    <canvas id="chart72"></canvas>
                </figure>
            </section>

            <section id="content03" class="cols-1">
                <figure>
                    <p>Gráfico Grupo Bar</p>
                    <h3 id="tituloReporte3"></h3>
                    <canvas id="chart73"></canvas>
                </figure>
            </section>

            <div class="row">

                <h3 id="tituloSalaFiltro"></h3>

                <div id="tablaContent01" style="margin-left: 40px ;display: block">

                    <label for="selectableAnio">FILTRO AÑO</label>
                    <select name="selectableAnio" id="selectableAnio">
                    <option value=""></option>
                </select>
                </div>


                <div id="tablaContent02" style="display: block; margin-left: 16px">
                    <label for="selectableFiltroSala">FILTRO </label>
                    <select name="selectableFiltroSala" id="selectableFiltroSala">
                    <option value=""></option>
                </select>
                </div>

                <div class="cols-2" style="width: 100%">
                    <div>
                        <figure>
                            <div>
                                <!--                        <button onclick="loadGraficoDetalle('01')">GRAFICAR TABLA</button>-->

                                <label for="selectable01">FILTRO </label>
                                <select name="selectable01" id="selectable01">
                                <option value=""></option>
                            </select>
                            </div>
                            <div id="spinner01" class="justify-content-center">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="sr-only">Loading...</span>
                                </div>
                            </div>
                            <table class="greyGridTable" id="table01" style="background-color: #ffffff; width: 100%;">
                                <thead>
                                    <tr id="headerTable01">
                                    </tr>
                                </thead>
                                <tbody id="bodyTable01">
                                </tbody>
                            </table>
                        </figure>
                    </div>
                    <div>
                        <figure class="col-12">
                            <div>
                                <!--                        <button onclick="loadGraficoDetalle('02')">GRAFICAR TABLA</button>-->

                                <label for="selectable02">Filtro Corte Procedencia</label>
                                <select name="selectable02" id="selectable02">
                                <option value=""></option>
                            </select>
                            </div>
                            <div id="spinner02" class=" justify-content-center">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="sr-only">Loading...</span>
                                </div>
                            </div>
                            <table class="greyGridTable" id="table02" style=" width: 100%!important;">
                                <thead>
                                    <tr id="headerTable02">
                                    </tr>
                                </thead>
                                <tbody id="bodyTable02">
                                </tbody>
                            </table>
                        </figure>
                    </div>

                </div>
            </div>
        </div>
    </main>

    <!-- ChartJS -->
    <script src="Chartjs/Chart.min.js"></script>

    <!-- Styles for charts -->
    <script src="js/chartStyles.js"></script>

    <!-- DCharts development -->
    <script src="./config.js"></script>
    <script src="js/script.js"></script>

    <script>
        function onCLickListener(position, titulo) {
            var ittulo = document.getElementById("tituloReporte1")
            var ittulo2 = document.getElementById("tituloReporte2")
            var ittulo3 = document.getElementById("tituloReporte3")
            ittulo.innerText = titulo;
            ittulo2.innerText = titulo;
            ittulo3.innerText = titulo;

            // alert(position)
            if (position == 1) {
                fetch('http://172.22.3.65:4000/api/getListadoExpIngresos', {
                        method: 'get',
                        headers: new Headers({
                            'authorization': 'eyJhbGciOiJIUzI1NiJ9.c3VwcmVtYQ.cpUyTYcgm8ixIVDTLe-Fua0RLkyUKg8yy2IkAOfKi2I',
                            'Content-Type': 'application/json'
                        })
                    })
                    .then(response => response.json())
                    .then(data => printCharts(data, position, titulo))
            }
            if (position == 2) {
                fetch('http://172.22.3.65:4000/api/getListadoProgramaciones', {
                        method: 'get',
                        headers: new Headers({
                            'authorization': 'eyJhbGciOiJIUzI1NiJ9.c3VwcmVtYQ.cpUyTYcgm8ixIVDTLe-Fua0RLkyUKg8yy2IkAOfKi2I',
                            'Content-Type': 'application/json'
                        })
                    })
                    .then(response => response.json())
                    .then(data => printCharts(data, position, titulo))
            }
            if (position == 3) {
                fetch('http://172.22.3.65:4000/api/getListadoEscritosAnual/2022', {
                        method: 'get',
                        headers: new Headers({
                            'authorization': 'eyJhbGciOiJIUzI1NiJ9.c3VwcmVtYQ.cpUyTYcgm8ixIVDTLe-Fua0RLkyUKg8yy2IkAOfKi2I',
                            'Content-Type': 'application/json'
                        })
                    })
                    .then(response => response.json())
                    .then(data => printCharts(data, position, titulo))
            }
        }
    </script>
</body>

</html>